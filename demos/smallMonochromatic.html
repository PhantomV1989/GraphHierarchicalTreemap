<!DOCTYPE html>
<html lang="en">
<style>
    html,
    body {
        background-color: black;
    }
</style>

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta charset="UTF-8" />
</head>

<body>
    <div id="svg-container">
        <svg id="svg" viewbox="0 0 48000 24000" style="width: 1841px; height: 587px">
        <g id="root" style="width: 48000px; height: 24000px"></g>
      </svg>
    </div>
</body>
<script src="https://cdn.jsdelivr.net/gh/PhantomV1989/GraphHierarchicalTreemap/bin/d3.v6.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/PhantomV1989/GraphHierarchicalTreemap/bin/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/PhantomV1989/GraphHierarchicalTreemap/bin/graph-hierarchical-treemap.min.js"></script>
<script>
    let height = $(window).height();
    let width = $(window).width();
    $("svg")[0].style.width = width;
    $("svg")[0].style.height = height;

    let allNames = [];

    function generateData(maxDepth, maxChildren, name) {
        let count = 0;

        function boo(n) {
            count += 1;
            return {
                n: "" + n,
                v: 1,
                c: [],
            };
        }

        function foo(rr, d) {
            if (d.length > maxDepth) {
                return;
            }
            for (let i = 0; i < maxChildren; i++) {
                if (Math.random() > 0.5 || d.length == 0) {
                    let cc = boo(i);
                    rr["c"].push(cc);
                    allNames.push(d.concat(cc.n).join("."));
                }
            }
            rr["c"].forEach((c) => {
                foo(c, d.concat([c.n]));
            });
        }
        let r = boo(name);

        foo(r, []);

        console.log(count + " objs generated");
        return r;
    }

    function generateLinks(count, allNames) {
        let links = {};
        let c = 0;
        let breaker = 0;

        function foo() {
            return allNames[Math.round(Math.random() * allNames.length)];
        }
        while (1) {
            let a = foo();
            let b = foo();
            if (a != b) {
                if (!(a in links)) links[a] = new Set();
                links[a].add(b);
            }
            c++;
            if (c > count || breaker > 100) break;
        }
        return links;
    }

    let data = generateData(3, 3, "root");
    let links = generateLinks(100, allNames);

    drawGraphHierarchicalTreemap(
        data,
        links,
        () => {
            return d3.scaleSequential(
                [GraphHierarchicalTreemap.maxDepth, 0],
                d3.interpolateBlues
            );
        },
        d3.scaleSequential(
            [GraphHierarchicalTreemap.maxDepth, 0],
            d3.interpolateGreens
        )
    );
</script>

</html>